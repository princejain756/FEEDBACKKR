{"ast":null,"code":"export async function postFeedback(data) {\n  try {\n    const res = await fetch('/api/feedback', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n    return res.ok;\n  } catch {\n    return false;\n  }\n}\nexport async function fetchSubmissions() {\n  try {\n    const res = await fetch('/api/submissions', {\n      method: 'GET',\n      credentials: 'include'\n    });\n    if (!res.ok) return {\n      ok: false,\n      status: res.status,\n      data: []\n    };\n    const data = await res.json();\n    return {\n      ok: true,\n      status: 200,\n      data: Array.isArray(data) ? data : []\n    };\n  } catch {\n    return {\n      ok: false,\n      status: 0,\n      data: []\n    };\n  }\n}\nexport async function fetchAggregates() {\n  try {\n    const res = await fetch('/api/aggregates', {\n      method: 'GET'\n    });\n    if (!res.ok) return null;\n    return await res.json();\n  } catch {\n    return null;\n  }\n}\nexport async function deleteSubmission(id) {\n  try {\n    const res = await fetch(`/api/submissions?id=${encodeURIComponent(id)}`, {\n      method: 'DELETE',\n      credentials: 'include'\n    });\n    return res.ok;\n  } catch {\n    return false;\n  }\n}\nexport async function clearAllRemote() {\n  try {\n    const res = await fetch('/api/submissions?all=1', {\n      method: 'DELETE',\n      credentials: 'include'\n    });\n    return res.ok;\n  } catch {\n    return false;\n  }\n}\nexport async function importRemoteData(feedbacks) {\n  try {\n    const res = await fetch('/api/submissions', {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        feedbacks\n      })\n    });\n    if (!res.ok) return {\n      ok: false\n    };\n    const data = await res.json();\n    return {\n      ok: true,\n      ...data\n    };\n  } catch {\n    return {\n      ok: false\n    };\n  }\n}","map":{"version":3,"names":["postFeedback","data","res","fetch","method","headers","body","JSON","stringify","ok","fetchSubmissions","credentials","status","json","Array","isArray","fetchAggregates","deleteSubmission","id","encodeURIComponent","clearAllRemote","importRemoteData","feedbacks"],"sources":["/Users/princejain756/feedback form/src/lib/api.js"],"sourcesContent":["export async function postFeedback(data) {\n  try {\n    const res = await fetch('/api/feedback', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    });\n    return res.ok;\n  } catch {\n    return false;\n  }\n}\n\nexport async function fetchSubmissions() {\n  try {\n    const res = await fetch('/api/submissions', { method: 'GET', credentials: 'include' });\n    if (!res.ok) return { ok: false, status: res.status, data: [] };\n    const data = await res.json();\n    return { ok: true, status: 200, data: Array.isArray(data) ? data : [] };\n  } catch {\n    return { ok: false, status: 0, data: [] };\n  }\n}\n\nexport async function fetchAggregates() {\n  try {\n    const res = await fetch('/api/aggregates', { method: 'GET' });\n    if (!res.ok) return null;\n    return await res.json();\n  } catch {\n    return null;\n  }\n}\n\nexport async function deleteSubmission(id) {\n  try {\n    const res = await fetch(`/api/submissions?id=${encodeURIComponent(id)}`, { method: 'DELETE', credentials: 'include' });\n    return res.ok;\n  } catch {\n    return false;\n  }\n}\n\nexport async function clearAllRemote() {\n  try {\n    const res = await fetch('/api/submissions?all=1', { method: 'DELETE', credentials: 'include' });\n    return res.ok;\n  } catch {\n    return false;\n  }\n}\n\nexport async function importRemoteData(feedbacks) {\n  try {\n    const res = await fetch('/api/submissions', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ feedbacks })\n    });\n    if (!res.ok) return { ok: false };\n    const data = await res.json();\n    return { ok: true, ...data };\n  } catch {\n    return { ok: false };\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}